<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>内置语言 | CellReport</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/CellReport/logo.jpg">
    <meta name="description" content="我的个人网站">
    
    <link rel="preload" href="/CellReport/assets/css/0.styles.91d50dc1.css" as="style"><link rel="preload" href="/CellReport/assets/js/app.17a3e785.js" as="script"><link rel="preload" href="/CellReport/assets/js/2.5bae9e2d.js" as="script"><link rel="preload" href="/CellReport/assets/js/1.6b473380.js" as="script"><link rel="preload" href="/CellReport/assets/js/32.f12af479.js" as="script"><link rel="prefetch" href="/CellReport/assets/js/10.5d0c9869.js"><link rel="prefetch" href="/CellReport/assets/js/11.ed9759c5.js"><link rel="prefetch" href="/CellReport/assets/js/12.13686169.js"><link rel="prefetch" href="/CellReport/assets/js/13.58661524.js"><link rel="prefetch" href="/CellReport/assets/js/14.0ca0c540.js"><link rel="prefetch" href="/CellReport/assets/js/15.3eee5f97.js"><link rel="prefetch" href="/CellReport/assets/js/16.47e1d84d.js"><link rel="prefetch" href="/CellReport/assets/js/17.84d2bcfd.js"><link rel="prefetch" href="/CellReport/assets/js/18.c22e76e6.js"><link rel="prefetch" href="/CellReport/assets/js/19.e4a8ac17.js"><link rel="prefetch" href="/CellReport/assets/js/20.baf0c4ba.js"><link rel="prefetch" href="/CellReport/assets/js/21.cd325d47.js"><link rel="prefetch" href="/CellReport/assets/js/22.880f82ad.js"><link rel="prefetch" href="/CellReport/assets/js/23.b63c4e28.js"><link rel="prefetch" href="/CellReport/assets/js/24.1722f890.js"><link rel="prefetch" href="/CellReport/assets/js/25.85b2b938.js"><link rel="prefetch" href="/CellReport/assets/js/26.defdec6f.js"><link rel="prefetch" href="/CellReport/assets/js/27.b7b7b7ce.js"><link rel="prefetch" href="/CellReport/assets/js/28.a3fd976c.js"><link rel="prefetch" href="/CellReport/assets/js/29.ef58409b.js"><link rel="prefetch" href="/CellReport/assets/js/3.e0409163.js"><link rel="prefetch" href="/CellReport/assets/js/30.ae59d942.js"><link rel="prefetch" href="/CellReport/assets/js/31.e3fef10c.js"><link rel="prefetch" href="/CellReport/assets/js/33.79da49dc.js"><link rel="prefetch" href="/CellReport/assets/js/4.0471e9ae.js"><link rel="prefetch" href="/CellReport/assets/js/5.77cb77cb.js"><link rel="prefetch" href="/CellReport/assets/js/6.39fa6f7e.js"><link rel="prefetch" href="/CellReport/assets/js/7.207e79d8.js"><link rel="prefetch" href="/CellReport/assets/js/vendors~docsearch.a43fb3db.js">
    <link rel="stylesheet" href="/CellReport/assets/css/0.styles.91d50dc1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CellReport/" class="home-link router-link-active"><!----> <span class="site-name">CellReport</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CellReport/" class="nav-link">
  简介
</a></div><div class="nav-item"><a href="/CellReport/zh/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="/CellReport/zh/conf/" class="nav-link">
  配置
</a></div><div class="nav-item"><a href="https://github.com/NoneDay/CellReport" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/CellReport/" class="nav-link">
  简介
</a></div><div class="nav-item"><a href="/CellReport/zh/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="/CellReport/zh/conf/" class="nav-link">
  配置
</a></div><div class="nav-item"><a href="https://github.com/NoneDay/CellReport" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>指南</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CellReport/zh/guide/" aria-current="page" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/#它是如何工作的" class="sidebar-link">它是如何工作的？</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/#为什么不是" class="sidebar-link">为什么不是 ...?</a></li></ul></li><li><a href="/CellReport/zh/guide/getting-started.html" class="sidebar-link">快速上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/getting-started.html#依赖环境" class="sidebar-link">依赖环境</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/getting-started.html#安装编译好的版本" class="sidebar-link">安装编译好的版本</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/getting-started.html#全手工构建" class="sidebar-link">全手工构建</a></li></ul></li><li><a href="/CellReport/zh/guide/dataset-param.html" class="sidebar-link">sql数据集和参数定义</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/dataset-param.html#sql-数据集" class="sidebar-link">sql 数据集</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/dataset-param.html#参数定义" class="sidebar-link">参数定义</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/dataset-param.html#级联参数的设置" class="sidebar-link">级联参数的设置</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/dataset-param.html#可多选下拉参数注意事项" class="sidebar-link">可多选下拉参数注意事项</a></li></ul></li><li><a href="/CellReport/zh/guide/cell-prop.html" class="sidebar-link">单元格基本属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/cell-prop.html#值表达式" class="sidebar-link">值表达式</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/cell-prop.html#显示值表达式" class="sidebar-link">显示值表达式</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/cell-prop.html#字体颜色和背景颜色" class="sidebar-link">字体颜色和背景颜色</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/cell-prop.html#报表的钻取、跳转" class="sidebar-link">报表的钻取、跳转</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/cell-prop.html#排序" class="sidebar-link">排序</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/cell-prop.html#扩展方向、左顶格、上顶格" class="sidebar-link">扩展方向、左顶格、上顶格</a></li></ul></li><li><a href="/CellReport/zh/guide/create-report.html" class="sidebar-link">报表制作解答</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/create-report.html#输入公式" class="sidebar-link">输入公式</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/create-report.html#如何得到一个汇总行" class="sidebar-link">如何得到一个汇总行</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/create-report.html#如何定时刷新报表或数据集" class="sidebar-link">如何定时刷新报表或数据集</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/create-report.html#如何升级报表程序并使我以前的设置能保留" class="sidebar-link">如何升级报表程序并使我以前的设置能保留</a></li></ul></li><li><a href="/CellReport/zh/guide/other-dataset.html" class="sidebar-link">更多的数据集类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/other-dataset.html#来自其他数据集" class="sidebar-link">来自其他数据集</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/other-dataset.html#来自于excel文件" class="sidebar-link">来自于excel文件</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/other-dataset.html#来自api调用" class="sidebar-link">来自API调用</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/other-dataset.html#来自组件报表" class="sidebar-link">来自组件报表</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/other-dataset.html#内存数据-sqlite" class="sidebar-link">内存数据(sqlite)</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/other-dataset.html#来自html的table" class="sidebar-link">来自html的table</a></li></ul></li><li><a href="/CellReport/zh/guide/lang.html" aria-current="page" class="active sidebar-link">内置语言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/lang.html#基础数据类型" class="sidebar-link">基础数据类型</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/lang.html#基础运算" class="sidebar-link">基础运算</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/lang.html#后端linq" class="sidebar-link">后端linq</a></li></ul></li><li><a href="/CellReport/zh/guide/function.html" class="sidebar-link">内置函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/function.html#数据集函数" class="sidebar-link">数据集函数</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/function.html#集合函数" class="sidebar-link">集合函数</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/function.html#集合运算后可接函数" class="sidebar-link">集合运算后可接函数</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/function.html#单元格函数" class="sidebar-link">单元格函数</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/function.html#日期函数" class="sidebar-link">日期函数</a></li><li class="sidebar-sub-header"><a href="/CellReport/zh/guide/function.html#字符串函数" class="sidebar-link">字符串函数</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="内置语言"><a href="#内置语言" class="header-anchor">#</a> 内置语言</h1> <ul><li>内置语言的语法类似js。</li></ul> <h2 id="基础数据类型"><a href="#基础数据类型" class="header-anchor">#</a> 基础数据类型</h2> <ul><li>数字: 如：1   1.2</li> <li>日期时间 如： 2021-10-10</li> <li>字符串 可以用单引号包起来，也可以用双引号包记起来，如：'hello' &quot;hello&quot;</li> <li>数组/列表 如：[ ] 空数组 [1,2] [&quot;hello&quot;,&quot;world&quot;] [1,&quot;hello&quot;]</li> <li>字典 如：{ } 空字典 或：{&quot;k1&quot;:&quot;hello&quot;,&quot;k2&quot;:&quot;world&quot;}</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.2</span> <span class="token comment">//数字</span>
<span class="token function">date</span><span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//日期</span>
<span class="token string">&quot;hello&quot;</span> <span class="token comment">//字符串</span>
<span class="token string">'world'</span> <span class="token comment">//字符串</span>
<span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">]</span> <span class="token comment">//数组/列表</span>
<span class="token punctuation">{</span><span class="token string-property property">&quot;k1&quot;</span><span class="token operator">:</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">k2</span><span class="token operator">:</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">}</span> <span class="token comment">//字典</span>
</code></pre></div><h2 id="基础运算"><a href="#基础运算" class="header-anchor">#</a> 基础运算</h2> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>null 空在和数字做运算时当做0，和字符串做运算时当做空字符串''</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// </span>
<span class="token comment">//加法  </span>
    <span class="token operator">=</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span> <span class="token comment">// 3</span>
    <span class="token operator">=</span><span class="token string">&quot;hello&quot;</span> <span class="token operator">+</span> <span class="token string">&quot; CellReport&quot;</span> <span class="token comment">// hello CellReport</span>
    <span class="token operator">=</span><span class="token number">123</span><span class="token operator">+</span> <span class="token keyword">null</span> <span class="token comment">// 123</span>
    <span class="token operator">=</span><span class="token string">&quot;hello&quot;</span> <span class="token operator">+</span> <span class="token keyword">null</span> <span class="token comment">// hello</span>
    <span class="token operator">=</span><span class="token string">&quot;hello&quot;</span> <span class="token operator">+</span> <span class="token number">123</span> <span class="token comment">// hello123</span>
    <span class="token operator">=</span><span class="token number">123</span> <span class="token operator">+</span> <span class="token string">&quot;hello&quot;</span>  <span class="token comment">// 123hello</span>
    <span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2.3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token comment">//</span>
    
<span class="token comment">// 除法。报表中经常会遇到除零或null，内置计算是直接返回0</span>
    <span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span>     <span class="token comment">// 0.5</span>
    <span class="token number">123</span><span class="token operator">/</span><span class="token number">0</span>     <span class="token comment">// 0</span>
    <span class="token number">123</span><span class="token operator">/</span><span class="token keyword">null</span> <span class="token comment">// 0</span>

    <span class="token operator">-</span> <span class="token operator">*</span> <span class="token operator">/</span> <span class="token operator">%</span> 
</code></pre></div><ul><li>逻辑判断 ：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>   &gt;   &gt;=   &lt;   &lt;=  ==
</code></pre></div><ul><li>关系运算：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&amp;&amp;</span> 逻辑与
 <span class="token operator">||</span>  或
 and  与 <span class="token comment">// 兼容 sql 的写法</span>
 or 或 <span class="token comment">// 兼容 sql 的写法</span>
 <span class="token string">''</span><span class="token operator">||</span> <span class="token boolean">false</span><span class="token operator">||</span> <span class="token keyword">null</span><span class="token operator">||</span> <span class="token string">'A'</span>  <span class="token comment">// A</span>
 <span class="token string">''</span> and <span class="token boolean">false</span> and  <span class="token keyword">null</span> and <span class="token string">'A'</span>  <span class="token comment">// false</span>
  <span class="token string">'A'</span> and    <span class="token string">'B'</span> <span class="token comment">// B</span>
  
 <span class="token keyword">in</span> 在后续列表的值里面 
 not  <span class="token keyword">in</span> 不在后续列表的值里面
 <span class="token keyword">var</span> aaa<span class="token operator">=</span><span class="token string">'a2'</span>
aaa <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'a1'</span><span class="token punctuation">,</span><span class="token string">'a2'</span><span class="token punctuation">]</span> <span class="token comment">// true</span>
aaa <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'a1'</span><span class="token punctuation">,</span><span class="token string">'a2'</span><span class="token punctuation">)</span> <span class="token comment">// true 兼容 sql 的写法</span>
aaa not <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'a1'</span><span class="token punctuation">,</span><span class="token string">'a2'</span><span class="token punctuation">]</span> <span class="token comment">// false</span>
aaa not <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'a1'</span><span class="token punctuation">,</span><span class="token string">'a2'</span><span class="token punctuation">)</span> <span class="token comment">// false 兼容 sql 的写法</span>

</code></pre></div><h3 id="扩展运算符"><a href="#扩展运算符" class="header-anchor">#</a> 扩展运算符（...）</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;{a:1, ...{b:2} }====&gt;&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">{</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// {&quot;a&quot;:1,&quot;b&quot;:2}</span>
<span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span> <span class="token comment">//{&quot;a&quot;:3,&quot;b&quot;:2}</span>
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token comment">// [1,3,4]</span>
</code></pre></div><h3 id="语句规范"><a href="#语句规范" class="header-anchor">#</a> 语句规范</h3> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>普通单独语句必须以分号结束，for 、function 等语句块 后不跟分号</p></div> <h3 id="变量定义"><a href="#变量定义" class="header-anchor">#</a> 变量定义</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> my_test_1<span class="token operator">=</span><span class="token string">&quot;22&quot;</span><span class="token punctuation">;</span><span class="token comment">//必须以var 开始</span>
</code></pre></div><h3 id="条件语句-if"><a href="#条件语句-if" class="header-anchor">#</a> 条件语句 if</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>param<span class="token punctuation">.</span>b_date<span class="token operator">==</span><span class="token string">'2022-01-01'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'2022元旦'</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>    
    <span class="token keyword">return</span> <span class="token string">'不是2022元旦'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="循环for"><a href="#循环for" class="header-anchor">#</a> 循环for</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> lj_sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    lj_sum<span class="token operator">=</span>lj_sum<span class="token operator">+</span>i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//对数组循环</span>
<span class="token function">foreach</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">var</span> one <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token comment">// ds是数据集的名称</span>
<span class="token function">foreach</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">var</span> one <span class="token keyword">in</span> ds</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    __env__<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span>ds<span class="token punctuation">.</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="函数定义"><a href="#函数定义" class="header-anchor">#</a> 函数定义</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;hello &quot;</span><span class="token operator">+</span>p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 可以函数嵌套</span>
<span class="token keyword">function</span> <span class="token function">func_parent</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//内部嵌套的函数，出了func_parent后无效</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello &quot;</span><span class="token operator">+</span>p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">hello</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="后端linq"><a href="#后端linq" class="header-anchor">#</a> 后端linq</h2> <p>$ 表示循环变量。通常参数都是lambda 函数。集合运算函数中不支持。
绝大部分函数都是延迟计算。</p> <h3 id="all-判断函数"><a href="#all-判断函数" class="header-anchor">#</a> All(判断函数)</h3> <p>确定序列中的所有元素是否都满足条件。
参数: 用于测试每个元素是否满足条件的函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
test_arr<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
test_arr<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
</code></pre></div><h3 id="append"><a href="#append" class="header-anchor">#</a> Append()</h3> <p>添加一个元素。不影响原有的列表</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sencond<span class="token operator">=</span>test_arr<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// [1,2,3,4]</span>

</code></pre></div><h3 id="any-判断函数"><a href="#any-判断函数" class="header-anchor">#</a> Any(判断函数)</h3> <p>确定序列中是否存在元素满足指定条件。
参数: 用于测试每个元素是否满足条件的函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
test_arr<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
</code></pre></div><h3 id="count"><a href="#count" class="header-anchor">#</a> Count()</h3> <p>序列计数。
如果没有参数，然后序列元素的个数
如果包含参数，这个参数需要是一个 用于测试每个元素是否满足条件的函数，最终返回满足判断函数的元素个数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
test_arr<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 10</span>
test_arr<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2</span>
</code></pre></div><h3 id="concat"><a href="#concat" class="header-anchor">#</a> Concat()</h3> <p>连接多个序列</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">// [1,2,3,2,3,4]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">// [1,2,3,2,3,4]</span>
</code></pre></div><h3 id="contains"><a href="#contains" class="header-anchor">#</a> Contains()</h3> <p>是否保含元素。
如果只有一个参数，使用缺省判断函数测试是否包含这个参数
如果两个参数，第二个参数是用于判断是否相等的函数，使用这个判断函数测试是否包含这个第一个参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
test_arr<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// true</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">'Name'</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res2 <span class="token operator">=</span> arr2<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">'Name'</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> a<span class="token punctuation">.</span>Val <span class="token operator">==</span> b<span class="token punctuation">.</span>Val<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  <span class="token comment">//  true</span>
</code></pre></div><h3 id="distinct"><a href="#distinct" class="header-anchor">#</a> Distinct()</h3> <p>是否保护元素。
如果没有参数，通过使用默认的相等比较器对值进行比较，返回序列中的非重复元素。
如果一个参数，这个参数是用于判断是否相等的函数，使用这个判断函数比较器对值进行比较，返回序列中的非重复元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'[1,2,1,3].distinct()'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[1，2，3]</span>
<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> a<span class="token punctuation">.</span>Val <span class="token operator">==</span> b<span class="token punctuation">.</span>Val<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{Name:&quot;A&quot;, Val:1}</span>
</code></pre></div><h3 id="first"><a href="#first" class="header-anchor">#</a> First()</h3> <p>返回第一个元素。
如果没有参数，返回第一个元素。
如果一个参数，第一个参数是用于判断条件是否成立的函数，返回满足条件的第一个元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
test_arr<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>
test_arr<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4</span>
</code></pre></div><h3 id="last"><a href="#last" class="header-anchor">#</a> Last()</h3> <p>返回最后一个元素。
如果没有参数，返回最后一个元素。
如果一个参数，第一个参数是用于判断条件是否成立的函数，返回满足条件的最后一个元素,如果没有，就返回null
如果有第二个参数，这个参数是用于返回没有last元素时应该返回的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
test_arr<span class="token punctuation">.</span><span class="token function">Last</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
test_arr<span class="token punctuation">.</span><span class="token function">Last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//9</span>
test_arr<span class="token punctuation">.</span><span class="token function">Last</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">14</span> <span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 由于没有满足条件的元素，所以返回 -1</span>
</code></pre></div><h3 id="where-判断函数"><a href="#where-判断函数" class="header-anchor">#</a> Where(判断函数)</h3> <p>基于谓词筛选值序列。
参数: 用于测试每个元素是否满足条件的函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
test_arr<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[10,9]</span>
</code></pre></div><h3 id="max"><a href="#max" class="header-anchor">#</a> max()</h3> <p>如果有第一个参数，这个参数是返回key函数，最终返回最大的key 值。如果没有参数，就按元素本身比较</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> max1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 8 </span>

<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> max2 <span class="token operator">=</span> arr2<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">.</span>Val <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 2 </span>
</code></pre></div><h3 id="min"><a href="#min" class="header-anchor">#</a> min()</h3> <p>如果有第一个参数，这个参数是返回key函数，最终返回最小的key 值。如果没有参数，就按元素本身比较</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> min1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 </span>

<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> min2 <span class="token operator">=</span> arr2<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">.</span>Val <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1 </span>
</code></pre></div><h3 id="maxby"><a href="#maxby" class="header-anchor">#</a> MaxBy()</h3> <p>第一个参数是返回key函数，最终返回最大的key 值对应的元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">'Name'</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'MaxBy(x=&gt;x.Val)'</span><span class="token punctuation">,</span>arr2<span class="token punctuation">.</span><span class="token function">MaxBy</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{'Name':&quot;B&quot;, 'Val':2}</span>
</code></pre></div><h3 id="minby"><a href="#minby" class="header-anchor">#</a> MinBy()</h3> <p>第一个参数是返回key函数，最终返回最小的key 值对应的元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">'Name'</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'MinBy(x=&gt;x.Val)'</span><span class="token punctuation">,</span>arr2<span class="token punctuation">.</span><span class="token function">MinBy</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{Name:&quot;A&quot;, 'Val':1}</span>
</code></pre></div><h3 id="sum"><a href="#sum" class="header-anchor">#</a> Sum()</h3> <p>第一个参数是返回key函数，最终返回最小的key 值对应的元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 36 </span>

<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum2 <span class="token operator">=</span> arr2<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">.</span>Val <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 3 </span>
</code></pre></div><h3 id="reduce"><a href="#reduce" class="header-anchor">#</a> Reduce</h3> <p>第一个参数是计算前面计算结果和当前元素的函数，第二个参数是初始值。很强大的函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'kiwi'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'watermelon'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'reduce(235)'</span><span class="token punctuation">,</span> fruits<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>Amount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prev <span class="token operator">+</span> curr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//reduce 函数，</span>
<span class="token keyword">var</span> sentence <span class="token operator">=</span> <span class="token string">&quot;the quick brown fox jumps over the lazy dog&quot;</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'sentence（原始）'</span><span class="token punctuation">,</span> sentence   <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'reduce(反转)'</span><span class="token punctuation">,</span>  <span class="token function">split</span><span class="token punctuation">(</span>sentence<span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> curr <span class="token operator">+</span><span class="token string">' '</span> <span class="token operator">+</span>prev<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="select"><a href="#select" class="header-anchor">#</a> Select</h3> <p>将序列中的每个元素投影到新序列。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  test_arr<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>a<span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span> <span class="token parameter">x</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string-property property">'b'</span><span class="token operator">:</span>x<span class="token punctuation">.</span>a<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// [{'b':4},{'v':6}]</span>
</code></pre></div><h3 id="selectmany"><a href="#selectmany" class="header-anchor">#</a> SelectMany</h3> <p>Projects each element of a sequence to an array and flattens the resulting sequences into one sequence.
处理序列中的每一个元素，并且熨平结果到一个新的大序列结果中。
第一个参数：返回每个元素对应的序列 的函数。这个函数的第二个参数是元素所在位置
第二个参数（可选） ： 需要两个参数。第一个参数，原始序列中的元素，第二个参数，中间序列中的元素，返回这两个参数计算后的新元素的序列</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Values</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Values</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  

arr<span class="token punctuation">.</span><span class="token function">selectMany</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">.</span>Values<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// [1, 2, 3, 4,5, 6, 7, 8]</span>

arr<span class="token punctuation">.</span><span class="token function">selectMany</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">.</span>Values<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> u</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span>t<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span>u<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:1},{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:2},{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:3},{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:4},{&quot;Name&quot;:&quot;B&quot;,&quot;Val&quot;:5},{&quot;Name&quot;:&quot;B&quot;,&quot;Val&quot;:6},{&quot;Name&quot;:&quot;B&quot;,&quot;Val&quot;:7},{&quot;Name&quot;:&quot;B&quot;,&quot;Val&quot;:8}]</span>
</code></pre></div><h3 id="foreach"><a href="#foreach" class="header-anchor">#</a> ForEach</h3> <p>对序列中的每个元素都调用一次函数参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">if</span><span class="token punctuation">(</span>t <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">trace</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
</code></pre></div><h3 id="groupby"><a href="#groupby" class="header-anchor">#</a> groupBy</h3> <p>第一个参数：key选择器
第二个参数可选：如果没有，就是将同组的元素放到一个List序列中。如果有，对同组的元素都调用这个处理函数，返回新元素组成新的List序列
第三个参数：对结果进一步出来，处理函数接收两个参数(Key,中间List序列),作为最终结果返回。如果没有这个参数，就将(Key,中间List序列) 作为最终结果返回</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">.</span>Name<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
res<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;Key: &quot;</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>Key<span class="token punctuation">,</span> <span class="token string">&quot;OBJ: &quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//有Key属性</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Key: A OBJ: [{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:1},{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:2}]</span>
<span class="token comment">// Key: C OBJ: [{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:3},{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:4}]</span>
<span class="token keyword">var</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span> <span class="token parameter">t</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">.</span>Name<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">,</span>$<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">;</span> 
res<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;Key: &quot;</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>Key<span class="token punctuation">,</span> <span class="token string">&quot;OBJ: &quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//有Key属性</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// Key: A OBJ:  [1,2]</span>
<span class="token comment">// Key: C OBJ:  [3,4]</span>
<span class="token keyword">var</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span> <span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name  <span class="token punctuation">,</span><span class="token parameter">v</span><span class="token operator">=&gt;</span>v<span class="token punctuation">,</span>  <span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span>v</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>k<span class="token punctuation">,</span><span class="token literal-property property">cnt</span><span class="token operator">:</span>v<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token literal-property property">min</span><span class="token operator">:</span>v<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token literal-property property">sum</span><span class="token operator">:</span>v<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Val<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
res<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;Key: &quot;</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>Key<span class="token punctuation">,</span> <span class="token string">&quot;OBJ: &quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//无Key属性</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// Key:  OBJ:  {&quot;k&quot;:&quot;A&quot;,&quot;cnt&quot;:2,&quot;min&quot;:1,&quot;sum&quot;:3}</span>
<span class="token comment">// Key:  OBJ:  {&quot;k&quot;:&quot;C&quot;,&quot;cnt&quot;:2,&quot;min&quot;:3,&quot;sum&quot;:7}</span>
</code></pre></div><h3 id="todictionary"><a href="#todictionary" class="header-anchor">#</a> ToDictionary</h3> <p>转换为Dictionary。实例化。
第一个参数：key选择器
第二个参数可选</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span> $<span class="token punctuation">.</span>Name <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToDictionary</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>Key<span class="token punctuation">,</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">trace</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {&quot;A&quot;:[{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:1},{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:2}],&quot;C&quot;:[{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:3},{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:4}]}</span>

</code></pre></div><h3 id="slice"><a href="#slice" class="header-anchor">#</a> Slice</h3> <p>和js 中slice 类似。参数：起始位置 结束位置，如果为负数，就是从结尾倒数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token function">fromto</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice()'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//不输入参数就是全部</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice(2)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 跳过两个</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice(1,3)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//取第1 个（含） 到 第3 个（不含）。前含后不含</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice(-3,-1)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 倒数第三个到倒数第三个</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice(-3)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从倒数第三个开始</span>
</code></pre></div><h3 id="take"><a href="#take" class="header-anchor">#</a> Take</h3> <p>从头开始返回指定数目的元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'take(2)='</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Take</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回两个</span>
</code></pre></div><h3 id="skip"><a href="#skip" class="header-anchor">#</a> Skip</h3> <p>从头开始跳过指定数目的元素后，其他全部返回</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Skip(2)='</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Skip</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 跳过两个</span>
</code></pre></div><h3 id="takewhile"><a href="#takewhile" class="header-anchor">#</a> TakeWhile</h3> <p>只要条件满足就返回到新序列里面，直到遇到不满足的第一个条件开始，剩余的全部忽略</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'TakeWhile(x=&gt;x&lt;5)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">TakeWhile</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="skipwhile"><a href="#skipwhile" class="header-anchor">#</a> SkipWhile</h3> <p>只要条件满足就跳过，直到遇到不满足的第一个条件开始，剩下的全部返回到新序列里面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'skipWhile(x=&gt;x&lt;5)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">skipWhile</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="orderby-thenby-thenbydescending-orderbydescending"><a href="#orderby-thenby-thenbydescending-orderbydescending" class="header-anchor">#</a> orderBy thenBy ThenByDescending orderByDescending</h3> <p>升序。稳定排序
参数：根据键对序列的元素进行排序。有orderby的后面才可以跟thenby .</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token function">trace</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">orderby</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ThenBy</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span><span class="token operator">-</span>x<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  [{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:11},{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:2},{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:4},{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:3}]</span>
<span class="token function">trace</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">orderby</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ThenByDescending</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span><span class="token operator">-</span>x<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:2},{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:11},{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:3},{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:4}]</span>
</code></pre></div><h3 id="zip"><a href="#zip" class="header-anchor">#</a> zip</h3> <p>打包</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> words <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
numbers<span class="token punctuation">.</span><span class="token function">Zip</span><span class="token punctuation">(</span>words <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token function">trace</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//[1,&quot;one&quot;]</span>
<span class="token comment">//[2,&quot;two&quot;]</span>
<span class="token comment">//[3,&quot;three&quot;]</span>
numbers<span class="token punctuation">.</span><span class="token function">Zip</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">first<span class="token punctuation">,</span> second</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> first <span class="token operator">+</span> <span class="token string">&quot;===&quot;</span> <span class="token operator">+</span> second<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token function">trace</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1===one</span>
<span class="token comment">//2===two</span>
<span class="token comment">//3===three</span>
</code></pre></div><h3 id="except"><a href="#except" class="header-anchor">#</a> Except</h3> <p>生成两个序列的差集。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Except</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToDictionary</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>Key<span class="token punctuation">,</span>$<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{&quot;Key&quot;:&quot;b&quot;,&quot;Value&quot;:2}]</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Except</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3,4]</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;1ab11dc&quot;</span><span class="token punctuation">.</span><span class="token function">Except</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['1','d']</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Except</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">&quot;abc&quot;</span>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 异常，不能执行</span>

</code></pre></div><h3 id="exceptby"><a href="#exceptby" class="header-anchor">#</a> ExceptBy</h3> <p>根据指定的键选择器函数生成两个序列的集差异。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res1 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">ExceptBy</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> 
    <span class="token parameter">t</span><span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Name  <span class="token punctuation">,</span>  <span class="token comment">// arr1 关键字选择器</span>
    <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>a<span class="token operator">==</span>y  <span class="token comment">// 比较运算器 x是arr2里的记录  y 是上面的关键字选择器的结果。如果关键字选择器 的结果类型和arr2 一样，这个参数可以省略</span>
    <span class="token punctuation">)</span> <span class="token punctuation">;</span>        
 <span class="token function">trace</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//   [{&quot;Name&quot;:&quot;B&quot;,&quot;Val&quot;:2},{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:3}]</span>
<span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res1 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">ExceptBy</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> 
    <span class="token parameter">t</span><span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Name   <span class="token comment">// arr1 关键字选择器    </span>
    <span class="token punctuation">)</span> <span class="token punctuation">;</span>        
 <span class="token function">trace</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//   [{&quot;Name&quot;:&quot;B&quot;,&quot;Val&quot;:2},{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:3}]</span>
</code></pre></div><h3 id="intersect"><a href="#intersect" class="header-anchor">#</a> Intersect</h3> <p>生成两个序列的交集。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Intersect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{&quot;Key&quot;:&quot;a&quot;,&quot;Value&quot;:1}]</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Intersect</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2]</span>
</code></pre></div><h3 id="intersectby"><a href="#intersectby" class="header-anchor">#</a> IntersectBy</h3> <p>根据指定的键选择器函数生成两个序列的交集。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res1 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">IntersectBy</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> 
    <span class="token parameter">t</span><span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Name  <span class="token punctuation">,</span>  <span class="token comment">// arr1 关键字选择器</span>
    <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>a<span class="token operator">==</span>y  <span class="token comment">// 比较运算器 x是arr2里的记录  y 是上面的关键字选择器的结果。如果关键字选择器 的结果类型和arr2 一样，这个参数可以省略</span>
    <span class="token punctuation">)</span> <span class="token punctuation">;</span>        
 <span class="token function">trace</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//   [{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:1}]</span>
<span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res1 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">IntersectBy</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> 
    <span class="token parameter">t</span><span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Name   <span class="token comment">// arr1 关键字选择器    </span>
    <span class="token punctuation">)</span> <span class="token punctuation">;</span>        
 <span class="token function">trace</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//   [{&quot;Name&quot;:&quot;B&quot;,&quot;Val&quot;:2}]</span>
</code></pre></div><h3 id="union"><a href="#union" class="header-anchor">#</a> union</h3> <p>生成两个序列的集联合。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> res <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9]      </span>
 <span class="token function">trace</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//   []</span>
</code></pre></div><h3 id="unionby"><a href="#unionby" class="header-anchor">#</a> unionBy</h3> <p>根据指定的键选择器函数生成两个序列的集联合。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res1 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">unionBy</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> 
    <span class="token parameter">t</span><span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Name  <span class="token punctuation">,</span>  <span class="token comment">// arr1 关键字选择器</span>
    <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>a<span class="token operator">==</span>y  <span class="token comment">// 比较运算器 x是arr2里的记录  y 是上面的关键字选择器的结果。如果关键字选择器 的结果类型和arr2 一样，这个参数可以省略</span>
    <span class="token punctuation">)</span> <span class="token punctuation">;</span>        
 <span class="token function">trace</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// </span>
</code></pre></div><h3 id="groupjoin"><a href="#groupjoin" class="header-anchor">#</a> groupJoin</h3> <p>基于键值等同性将两个序列的元素进行关联，并对结果进行分组。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Code</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Code</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Code</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Code</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Code</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res1 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">groupJoin</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> 
    <span class="token parameter">t</span><span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>                     <span class="token comment">// arr1 selector</span>
    <span class="token parameter">u</span><span class="token operator">=&gt;</span>u<span class="token punctuation">.</span>Code<span class="token punctuation">,</span>                     <span class="token comment">// arr2 selector</span>
    <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> u</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">Item</span><span class="token operator">:</span>t<span class="token punctuation">,</span> <span class="token literal-property property">Group</span><span class="token operator">:</span>u<span class="token punctuation">}</span> <span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>         <span class="token comment">// result selector    </span>
<span class="token function">trace</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [</span>
<span class="token comment">// {&quot;Item&quot;:{&quot;Name&quot;:&quot;A&quot;,&quot;Val&quot;:1},&quot;Group&quot;:[{&quot;Code&quot;:&quot;A&quot;},{&quot;Code&quot;:&quot;A&quot;}]},</span>
<span class="token comment">// {&quot;Item&quot;:{&quot;Name&quot;:&quot;B&quot;,&quot;Val&quot;:2},&quot;Group&quot;:[{&quot;Code&quot;:&quot;B&quot;},{&quot;Code&quot;:&quot;B&quot;}]},</span>
<span class="token comment">// {&quot;Item&quot;:{&quot;Name&quot;:&quot;C&quot;,&quot;Val&quot;:3},&quot;Group&quot;:[{&quot;Code&quot;:&quot;C&quot;}]}]</span>
</code></pre></div><h3 id="join"><a href="#join" class="header-anchor">#</a> join</h3> <p>基于匹配键对两个序列的元素进行关联。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test_join<span class="token operator">=</span>
        <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'b11'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'b222'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token parameter">left</span><span class="token operator">=&gt;</span>left<span class="token punctuation">.</span>a <span class="token punctuation">,</span>
          <span class="token parameter">right</span><span class="token operator">=&gt;</span>right<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
          <span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span>left<span class="token punctuation">.</span>a<span class="token punctuation">,</span><span class="token literal-property property">left_prop</span><span class="token operator">:</span>left<span class="token punctuation">.</span>b<span class="token punctuation">,</span><span class="token literal-property property">right</span><span class="token operator">:</span>right<span class="token punctuation">.</span>b <span class="token punctuation">}</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [{&quot;key&quot;:1,&quot;left_prop&quot;:2,&quot;right&quot;:&quot;b11&quot;}]</span>

<span class="token function">trace</span><span class="token punctuation">(</span>test_join<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="joinasstring"><a href="#joinasstring" class="header-anchor">#</a> JoinAsString</h3> <p>将列表中的每一项取ToString(),然后用参数指定的字符串连接起来，如果没提供，就用逗号链接</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">joinAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//one,two,three</span>
<span class="token punctuation">[</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">joinAsString</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//one_two_three</span>
</code></pre></div><h3 id="tolist"><a href="#tolist" class="header-anchor">#</a> ToList</h3> <p>以上所有返回的是序列的函数，内部都是一个枚举对象，使用这个函数，将枚举对象转换为真正的序列列表</p> <div class="language-js extra-class"><pre class="language-js"><code>test_arr<span class="token punctuation">.</span><span class="token function">skipWhile</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="大量的例子"><a href="#大量的例子" class="header-anchor">#</a> 大量的例子</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test_parse_json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  __env__<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> test_arr<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span> <span class="token parameter">x</span><span class="token operator">=&gt;</span> x<span class="token operator">*</span><span class="token number">2</span> <span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> one <span class="token keyword">in</span> test_arr<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span> <span class="token parameter">x</span><span class="token operator">=&gt;</span> x<span class="token operator">*</span><span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    __env__<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;one:&quot;</span><span class="token operator">+</span> one<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  test_arr<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>a<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span> <span class="token parameter">x</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string-property property">'b'</span><span class="token operator">:</span>x<span class="token punctuation">.</span>a<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
  
  <span class="token keyword">var</span> txt<span class="token operator">=</span><span class="token string">'{&quot;a&quot;:1,&quot;b&quot;:[1,2,3]}'</span><span class="token punctuation">;</span> 
  <span class="token keyword">return</span> <span class="token function">json_parse</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">lambds_func</span><span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">33</span> <span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test_lambda_func</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'test_lambda_func'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test_lambda_func</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'lambds_func(1)='</span><span class="token operator">+</span><span class="token function">lambds_func</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token function">fromto</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice()'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//和js 中slice 类似，不输入参数就是全部</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice(2)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 跳过两个</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice(1,3)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//取第1 个（含） 到 第3 个（不含）。前含后不含</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice(-3,-1)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 倒数第三个到倒数第三个</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'slice(-3)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从倒数第三个开始</span>
<span class="token keyword">var</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'kiwi'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'watermelon'</span><span class="token punctuation">,</span> <span class="token literal-property property">Amount</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'reduce(235)'</span><span class="token punctuation">,</span> fruits<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>Amount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prev <span class="token operator">+</span> curr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//reduce 函数，第一个参数是计算前面计算结果和当前元素的函数，第二个参数是初始值</span>
<span class="token keyword">var</span> sentence <span class="token operator">=</span> <span class="token string">&quot;the quick brown fox jumps over the lazy dog&quot;</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'sentence（原始）'</span><span class="token punctuation">,</span> sentence   <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'reduce(反转)'</span><span class="token punctuation">,</span>  <span class="token function">split</span><span class="token punctuation">(</span>sentence<span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> curr <span class="token operator">+</span><span class="token string">' '</span> <span class="token operator">+</span>prev<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'---------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'[1,2,1,3].distinct()'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 如果没有参数，就是对每个元素做distinct ，如果有参数，这个参数需要是用来做比较的函数</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'[{Name:&quot;A&quot;, Val:1},{Name:&quot;B&quot;, Val:1}].distinct(function(a, b){ return a.Val == b.Val })'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Val</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> a<span class="token punctuation">.</span>Val <span class="token operator">==</span> b<span class="token punctuation">.</span>Val<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'test_arr='</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'all(x=&gt;x&lt;10)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//全部为true</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'any(x=&gt;x&lt;2)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 有为true</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'skipWhile(x=&gt;x&lt;5)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">skipWhile</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//只要条件满足就跳过，直到遇到不满足的第一个条件开始，剩下的全部返回到新序列里面</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'TakeWhile(x=&gt;x&lt;5)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">TakeWhile</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//只要条件满足就返回到新序列里面，直到遇到不满足的第一个条件开始，全部忽略</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Min()'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Max()'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Sum()'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'take(2)='</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Take</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回两个</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Skip(2)='</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Skip</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 跳过两个</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'First()='</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第一个</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'First(x=&gt;x&gt;4)='</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//满足条件的第一个，如果没有就返回空</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'First(x=&gt;x&gt;14  ,-1 )  '</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">14</span> <span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//满足条件的第一个，如果没有就返缺省值（第二个参数）</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'---------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Last()'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//和first类似</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Last(x=&gt;x&gt;4)'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Last</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Last(x=&gt;x&gt;14  ,-1 )  '</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">Last</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">14</span> <span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'ForEach(x=&gt;x&gt;4)\n'</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">ForEach</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span> <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'foreach:'</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ForEach 对每个元素用函数处理一下</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'---------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Contains(3) '</span><span class="token punctuation">,</span>test_arr<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">Name</span><span class="token operator">:</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">'Name'</span><span class="token operator">:</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token function">trace</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> res2 <span class="token operator">=</span> arr2<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">'Name'</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">'Val'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> a<span class="token punctuation">.</span>Val <span class="token operator">==</span> b<span class="token punctuation">.</span>Val<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  <span class="token comment">//  true</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'MinBy(x=&gt;x.Val)'</span><span class="token punctuation">,</span>arr2<span class="token punctuation">.</span><span class="token function">MinBy</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//以函数计算后，满足最小条件的元素</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'MaxBy(x=&gt;x.Val)'</span><span class="token punctuation">,</span>arr2<span class="token punctuation">.</span><span class="token function">MaxBy</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//以函数计算后，满足最大条件的元素</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Sum(x=&gt;x.Val)'</span><span class="token punctuation">,</span>arr2<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//以函数计算后的结果求和</span>

<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;arr2.contains({'Name':\&quot;C\&quot;, 'Val':2}, (a, b)=&gt;{ return a.Val == b.Val; }) &quot;</span><span class="token punctuation">,</span>res2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'---------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token function">fromto</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;text !!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">trace</span><span class="token punctuation">(</span> <span class="token function">json_stringify</span><span class="token punctuation">(</span> test_arr<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span> <span class="token parameter">x</span><span class="token operator">=&gt;</span> x<span class="token operator">*</span><span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以级联。ToList转换为列表（类似js里面的数组和c#里面的List）</span>

  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> one <span class="token keyword">in</span> test_arr<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span> <span class="token parameter">x</span><span class="token operator">=&gt;</span> x<span class="token operator">*</span><span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;one:&quot;</span><span class="token operator">+</span> one<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> test_arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'a'</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">trace</span><span class="token punctuation">(</span> test_arr<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>a<span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span> <span class="token parameter">x</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string-property property">'b'</span><span class="token operator">:</span>x<span class="token punctuation">.</span>a<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">lambds_func</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'lambds_func(1)='</span><span class="token operator">+</span><span class="token function">lambds_func</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="修改数据集数据"><a href="#修改数据集数据" class="header-anchor">#</a> 修改数据集数据</h3> <p>如果需要取完数据后，对数据集内的数据进行修改，我们必须要使用ds.Rows取出对应的行集。循环这个行集逐个修改。不能对数据集新增列，如果需要新增，我们要在sql 中提前准备好这个列，供我们修改使用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_after_calc_dataset_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot; begin _after_calc_dataset_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">trace</span><span class="token punctuation">(</span>ds<span class="token punctuation">.</span>Rows<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span>x<span class="token punctuation">.</span>排名<span class="token punctuation">,</span> x<span class="token punctuation">.</span>链接Id<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 打印修改前的数据</span>
  ds<span class="token punctuation">.</span>Rows<span class="token punctuation">.</span><span class="token function">ForEach</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>x<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'排名'</span><span class="token punctuation">,</span><span class="token number">1111</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//修改数据</span>
  <span class="token function">trace</span><span class="token punctuation">(</span>ds<span class="token punctuation">.</span>Rows<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span>x<span class="token punctuation">.</span>排名<span class="token punctuation">,</span> x<span class="token punctuation">.</span>链接Id<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 打印修改后的数据</span>
  <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot; end _after_calc_dataset_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/NoneDay/CellReport/edit/master/docs/zh/guide/lang.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">6/28/2023, 2:37:44 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/CellReport/zh/guide/other-dataset.html" class="prev">
        更多的数据集类型
      </a></span> <span class="next"><a href="/CellReport/zh/guide/function.html">
        内置函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/CellReport/assets/js/app.17a3e785.js" defer></script><script src="/CellReport/assets/js/2.5bae9e2d.js" defer></script><script src="/CellReport/assets/js/1.6b473380.js" defer></script><script src="/CellReport/assets/js/32.f12af479.js" defer></script>
  </body>
</html>
